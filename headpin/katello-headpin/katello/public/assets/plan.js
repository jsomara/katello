KT.panel.list.registerPage("sync_plans",{create:"new_sync_plan"});$(document).ready(function(){$.editable.addInputType("datepicker",{element:function(c,b){var d=$(this),a=$('<input data-change="false"/>');if(c.width!="none"){a.width(c.width)}if(c.height!="none"){a.height(c.height)}a.attr("autocomplete","off");d.append(a);return a},plugin:function(c,b){var d=this,a=d.find("input");c.onblur="nothing";datepicker={onSelect:function(){a.attr("data-change","true")},onClose:function(){if($(this).attr("data-change")=="false"){b.reset(d)}}};a.datepicker(datepicker)}});$.editable.addInputType("timepicker",{element:function(c,b){var d=$(this),a=$('<input data-change="false"/>');if(c.width!="none"){a.width(c.width)}if(c.height!="none"){a.height(c.height)}a.attr("autocomplete","off");d.append(a);return a},plugin:function(c,b){var d=this,a=d.find("input");c.onblur="ignore";a.timepickr({convention:12}).click()}});$("#datepicker").live("mousedown",function(){$(this).datepicker({changeMonth:true,changeYear:true})});$("#timepicker").live("mousedown",function(){$(this).timepickr({convention:12})})});(function(a){var c='<div class="ui-helper-reset ui-timepickr ui-widget" />';var e="<ol />";var d='<li class="{className}">{label}</li>';function b(f,g){for(key in g){f=f.replace("{"+key+"}",g[key])}return f}a.widget("ui.timepickr",{_init:function(){var h=this,f=this.element;f.data("timepickr.initialValue",f.val());var i=this.menu=h._buildMenu().insertAfter(f);i.children().hide();f.bind(this.options.trigger+".timepickr",function(){h.show()});var g=this.options.hoverIntent&&a.fn.hoverIntent?"hoverIntent":"hover";i.data("timepickr",this).css({width:this.options.width}).find("li").addClass("ui-state-default ui-corner-all")[g](function(){h.inside=true;a(this).siblings().removeClass("ui-state-hover");a(this).addClass("ui-state-hover");h._redraw();h.showNextLevel(this);h.update()},function(){h.inside=false}).end().find("ol").addClass("ui-widget ui-helper-clearfix ui-helper-reset").hide();this._redraw();f.blur(function(j){h.hide();if(h.inside){h._trigger("select",[j,h])}if(h.options.resetOnBlur){f.val(f.data("timepickr.initialValue"))}});if(this.options.val){f.val(this.options.val)}if(this.options.handle){a(this.options.handle).click(function(){h.show();h.element.focus()})}if(this.options.resetOnBlur){i.find("li").bind("mousedown.timepickr",function(){f.data("timepickr.initialValue",f.val())})}this._redraw()},update:function(){var f={h:this.getValue("hour"),m:this.getValue("minute"),prefix:this.getValue("prefix"),suffix:this.getValue("suffix")};a(this.element).val(b(this.options.format,f))},getValue:function(f){var g=a("."+f+".ui-state-hover",this.menu)[0]||a("."+f+":first",this.menu)[0];return a(g).text()},destroy:function(){this.menu.remove();a.Widget.prototype.destroy.apply(this)},show:function(){this.menu.css({top:this.element.position().top+this.element.height()+this.options.top,zIndex:1000});this.menu.find("ol:eq(0)").css("left",this.element.position().left).show()},showNextLevel:function(f){a(f).closest("ol").next().show(this.options.animSpeed)},_redraw:function(){this.menu.css({top:this.element.position().top+this.element.height()+this.options.top,left:this.element.position().left+this.options.left});if(this.options.convention===24){var h=this.menu.find("ol:eq(1)");var g=h.find("li").slice(0,12);var f=h.find("li").slice(12,24);if(this.menu.find("ol:eq(0) li:eq(0)").hasClass("ui-state-hover")){f.hide();g.show()}else{g.hide();f.show()}}var i=this.menu.find("ol");i.each(function(k){var j=a(this).prev("ol");var l=j.find(".ui-state-hover:visible").position()||j.find("li:visible:first").position();if(l){a(this).css("margin-left",l.left)}})},hide:function(){this.menu.find("ol").hide()},activate:function(f){this.element.focus();this.show(this.options.animSpeed)},_createRow:function(f,g){var h=a(e);a.each(f,function(){h.append(a(b(d,{className:g,label:this.toString()})))});return h},_getRanges12:function(){var f=[];f.push(this._createRow(["01","02","03","04","05","06","07","08","09","10","11","12"],"hour"));f.push(this._createRow(this.options.rangeMin,"minute"));f.push(this._createRow(this.options.suffix,"suffix"));return f},_getRanges24:function(){var g=[],f=this.options;g.push(this._createRow(this.options.prefix,false,"prefix"));g.push(this._createRow(["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],"hour"));g.push(this._createRow(this.options.rangeMin,"minute"));return g},_buildMenu:function(){var g=a(c);var f=this.options.convention===24&&this._getRanges24()||this._getRanges12();a.each(f,function(h,j){g.append(j)});return g}});a.ui.timepickr.prototype.options={top:6,left:0,animSpeed:0,trigger:"click",convention:12,format:"{h}:{m} {suffix}",handle:false,prefix:["00-11","12-23"],suffix:["am","pm"],rangeMin:["00","15","30","45"],resetOnBlur:true,val:false,hoverIntent:false}})(jQuery);